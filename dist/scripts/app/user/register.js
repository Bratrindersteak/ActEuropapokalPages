define(function(e,t,n){var o=e("zepto"),i=e("base"),r=e("render"),s=e("{tpl_path}/static2015/template/protocol.tpl"),c={protocol:s};o(function(){r.tpl("protocol_tpl",c);var e=new r.events.common,t=o(".question-center");o("#quickRegisterBtn").on("click",function(){return i.utils.checkMobile(o("#userPhoneNum").val())?""===o("#phoneCaptcha").val()?(o(".question-center").find("i").html("请输入手机验证码"),i.utils.coverLayer.tipsCover(t,"hint-not"),!1):void i.common.postData(i.address.register_validsms,"phone="+o("#userPhoneNum").val()+"&captcha="+o("#phoneCaptcha").val(),!1,function(e){1===e.code?(o("#content_part").hide(),o(".login-hint").hide(),o("#registerResult").show(),ga("send","event","register-action","click",o("#userPhoneNum").val())):3===e.code?(o("#content_part").hide(),o("#registerResult, .login-hint").show(),ga("send","event","register-action","click",o("#userPhoneNum").val())):(o(".question-center").find("i").html("验证码错误"),i.utils.coverLayer.tipsCover(t,"hint-not"))},function(){}):(o(".question-center").find("i").html("请输入正确手机号码"),i.utils.coverLayer.tipsCover(t,"hint-not"),!1)}),o(".btn-dl").on("click",function(){i.common.postData(i.address.quick_login,"phone="+o("#userPhoneNum").val()+"&captcha="+o("#phoneCaptcha").val(),!1,function(e){1===e.code?(o(".question-center").find("i").html("登录成功"),i.utils.coverLayer.tipsCover(t,"hint-ok"),window.localStorage.setItem("userid",o("#userPhoneNum").val()),ga("send","event"," register-relogin","click",o("#userPhoneNum").val()),setTimeout(function(){window.location.href="/"},2e3)):(o(".question-center").find("i").html("验证码错误"),i.utils.coverLayer.tipsCover(t,"hint-not"),setTimeout(function(){o("#content_part").show(),o("#registerResult").hide()},2e3))},function(){})}),o("#registerCommitBtn").on("click",function(){var e=o("#registerPassword").val(),n=o("#repeatPassword").val();return""===e||e!==n?(o(".question-center").find("i").html("请正确输入两次密码"),i.utils.coverLayer.tipsCover(t,"hint-not"),!1):void i.common.postData(i.address.register_commit,"phone="+o("#userPhoneNum").val()+"&captcha="+o("#phoneCaptcha").val()+"&password="+n+"&password1="+e,!1,function(e){1===e.code?(o(".question-center").find("i").html("请记住您的密码哦"),i.utils.coverLayer.tipsCover(t,"hint-ok"),ga("send","event","register-password","click",o("#userPhoneNum").val()),window.localStorage.setItem("userid",o("#userPhoneNum").val()),setTimeout(function(){window.location.href="/"},2e3)):(o(".question-center").find("i").html(e.info),i.utils.coverLayer.tipsCover(t,"hint-not"),setTimeout(function(){o("#content_part").show(),o("#registerResult").hide()},2e3))},function(){})}),o("#getCaptchaBtn").on("click",function(){i.utils.checkMobile(o("#userPhoneNum").val())?(i.common.postData(i.address.register_sendsms,"phone="+o("#userPhoneNum").val(),!1,function(e){var t=59;o("#getCaptchaBtn").hide(),o("#repostCaptchaBtn").show();var n=setInterval(function(){0===t?(clearInterval(n),o("#repostCaptchaBtn").hide(),o("#getCaptchaBtn").show()):o("#repostCaptchaBtn").html("重发验证码（"+t--+"）")},1e3)},function(){}),ga("send","event","register-tel","click",o("#userPhoneNum").val())):(o(".question-center").find("i").html("请输入正确手机号码"),i.utils.coverLayer.tipsCover(t,"hint-not"))}),o("#protocol_part").on("click",function(){i.utils.webkitTransform("protocol_popup",[],function(){o("#content_part").hide(),o("#footer").hide(),o(".return-top").trigger("click")})}),e.commonEventBind()})});