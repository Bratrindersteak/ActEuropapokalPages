define(function(t,e,i){var n=t("zepto"),o=t("base");t("render");n(function(){var t,e,i,a=null;n("#buysell").on("click",function(){var t=n("#remark").val(),e=n("#contact_phone").val(),i=n("#form-clue-form").attr("action");return i="/"+i.replace(/^\/(.*)/,"$1"),0===t.length?(n(".hint-not i").text("请填写您的购车需求"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1):t.length>500?(n(".hint-not i").text("您输入的文字已超限制，请删减后再提交！"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1):0===e.length?(n(".hint-not i").text("请输入您的手机号码"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1):o.utils.checkMobile(e)?void o.common.postData(i,"contact_phone="+e+"&remark="+t,!1,function(t){1===t.code?(n(".hint-ok i").text("提交成功！"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-ok"),setTimeout(function(){location.href=location.href},3e3)):(n(".hint-not i").text("提交失败！"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"))},function(){}):(n(".hint-not i").text("手机号码错误，请重新输入"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1)}),n(".see-car").on("click",function(){var t=n("#FormClue_contact_name").val(),e=n("#FormClue_contact_phone").val(),r=n("#FormClue_remarks").val(),s=n("#FormClue_wish_series").val(),c=n("#form-clue-form").attr("action");return c="/"+c.replace(/^\/(.*)/,"$1"),0===t.length?(n(".hint-not i").text("请输入您的姓名"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1):0===e.length?(n(".hint-not i").text("请输入您的联系电话"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1):o.utils.checkMobile(e)?""===s?(n(".hint-not i").text("请选择车型"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1):0===r.length?(n(".hint-not i").text("请输入车辆概况"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1):r.length>500?(n(".hint-not i").text("您输入的文字已超限制，请删减后再提交！"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1):(console.log(a+"-"+i),void o.common.postData(c,"FormClue[contact_name]="+t+"&FormClue[contact_phone]="+e+"&FormClue[remarks]="+r+"&FormClue[wish_series]="+s+"&FormClue[wish_series_id]="+a+"&FormClue[wish_brand_id]="+i,!1,function(t){1===t.code?(n(".hint-ok i").text("提交成功！"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-ok"),setTimeout(function(){location.href=location.href},3e3)):(n(".hint-not i").text("提交失败！"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"))},function(){})):(n(".hint-not i").text("手机号码错误，请重新输入"),o.utils.coverLayer.tipsCover(n(".question-center"),"hint-not"),!1)}),n(".brand-choice").on("click",function(t){o.utils.webkitTransform("brand_popup",[],function(){n("#content_part").hide(),n("#footer").hide()})}),n(".brand-title li").on("click",function(){var t=n(this).html(),e=n(this).attr("data-quick").split(",");if(n(".brand-title li").removeClass("active"),n(this).addClass("active"),e.join("")===t){n(".brand-box").hide();for(var i=0;i<e.length;i++)n(".brand-box-"+e[i]).show()}}),n(".brand-box").on("click","li",function(){i=n(this).attr("data-id"),t=n(this).find("span").html(),r(null,o.address.assess.series,"/?brand_id="+i,s)}),n(".series-box").on("click","li",function(){a=n(this).find("a").attr("data-id"),e=n(this).find("a").html(),n("#FormClue_wish_series").val(t.trim()+" "+e.trim()),n("#FormClue_wish_brand_id").val(i),n("#FormClue_wish_series_id").val(a),o.utils.webkitTransform("series_popup",["content_part","footer"],function(){n("#series_popup").hide()})})});var r=function(t,e,i,r){var s=null;t&&(n(t).addClass("selected"),s=setTimeout(function(){n(t).removeClass("selected"),clearTimeout(s)},200)),o.utils.coverLayer.alphaStart(),o.common.getData(e,i,!1,r,function(){})},s=function(t){var e="";for(var i in t.series){var r=t.series[i];e+="<div class='line-box'><h2 class='glb-title'><span>"+i+"</span></h2><ul>";for(var s=0;s<r.length;s++)e+="<li><a data-id='"+r[s].id+"'>"+r[s].name+"</a></li>";e+="</ul></div>"}n("#series_popup header .sub-visit").prop("href",t.url),n(".series-box").html("").append(e),o.utils.webkitTransform("series_popup",[],function(){n("#brand_popup").hide(),n("#content_part").hide(),n("#footer").hide(),o.utils.coverLayer.alphaEnd()})}});