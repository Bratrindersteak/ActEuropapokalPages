define(function(e,t,n){var a=e("zepto");a(document).ready(function(){var e,t,n=a("#cdShopCoordLong").val(),o=a("#cdShopCoordLat").val(),r=a("#cdShopAddress").val(),d=null;a("#fullShopMap").height(a(window).height()),e=new BMap.Map("fullShopMap"),t=new BMap.Point(n,o),d=new BMap.Marker(t),d.enableDragging(),e.centerAndZoom(t,15),e.addControl(new BMap.NavigationControl),e.addControl(new BMap.ScaleControl),e.addControl(new BMap.OverviewMapControl),e.addControl(new BMap.MapTypeControl);var l=null;l=new BMapLib.SearchInfoWindow(e,r,{onSearchComplete:function(t){if(transit.getStatus()==BMAP_STATUS_SUCCESS){var n=t.getStart(),a=t.getEnd();addStart(n.point,n.title),addEnd(a.point,a.title);for(var o=t.getPlan(0),r=0;r<o.getNumRoutes();r++)o.getRoute(r).getDistance(!1)>0&&addWalkRoute(o.getRoute(r).getPath());var d=[];for(r=0;r<o.getNumLines();r++)d=d.concat(o.getLine(r).getPath()),addLine(o.getLine(r).getPath());e.setViewport(d)}},width:240,height:60,panel:"panel",enableAutoPan:!1,searchTypes:[BMAPLIB_TAB_TO_HERE]}),l.open(d);var i=new BMap.GeolocationControl;e.addControl(i),e.addEventListener("tilesloaded",function(){e.addOverlay(d),d.setAnimation(BMAP_ANIMATION_BOUNCE)}),d.addEventListener("click",function(){l.open(d)}),a("#r-result").on("click",".tranroute-plan-list",function(){a("#r-result").empty()})})});